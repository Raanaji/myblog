---
template: BlogPost
path: /ergodicity
mockup: 
thumbnail:
date: 2020-01-25
name: A simple introduction to ergodicity
description: 'We will be critically looking at the concept of ergodicity'
tags:
  - Quantitative Finance 
  - Philosophy
  - Gambling
  - Economics
---

# Musings on asymmetry and how it affects individual risk

This post explores fundamental questions of how we can make decisions more methodically or make bets which do not cause us ruin. It is suggested to use Jupiter notebook for running the presented code. 

The following situations are considered central to our post

- Uncertain situation and constant uncertainty affecting decision making.
- Asymmetric and non-linear eventualities affecting us as individuals.
- No transparency in information distribution, thus a skewness of information (which can also be termed alternative as mass distribution of noise outweighs the distribution of information).

Given the above three situations, concepts such as rationality, morality, and risk taking seem to coincide when we reflect upon them.

This post draws heavy inspiration from Nassim Taleb, especially his book Antifragility and his technical book Statistical Consequences of Tail Risks, which includes plenty of mathematics. Taleb has successfully unearthed insights for leadership which at first glance may seem counterintuitive and even counterproductive to any given cause.

We discuss the following topics:

- The minority rule
- Galam models
- Wealth dynamics
- Ergodicity economics

## References

- [Skin in the Game](https://en.wikipedia.org/wiki/Skin_in_the_Game_(book)) - *Nassim Nicholas Taleb*
- [Ergodicity Economics](https://ergodicityeconomics.com/lecture-notes/) - *Peters*
- [Optimal leverage from non-ergodicity](https://www.tandfonline.com/doi/abs/10.1080/14697688.2010.513338) - *Peters*
- [Leverage Efficiency](https://arxiv.org/abs/1101.4548)- *Peters & Adamou*
- [Evaluating gambles using dynamics](https://doi.org/10.1063/1.4940236) - *Peters & Gell-Mann*
- [Insurance makes wealth grow faster](https://arxiv.org/abs/1507.04655) - *Peters & Adamou*
- [Sociophysics: A review of Galam models](https://arxiv.org/pdf/0803.1800.pdf) - *Galam*

# Real world decision making - life under uncertainty

## Connected elements of decision making

- Uncertainty and the reliability of knowledge
- Rationality in complex systems and in the real world
- Symmetry in human affairs (fairness, justice, responsibility, reciprocity)
- Information sharing in transactions

## Complications

> *In academia there is no difference between academia and the real world; in the real world, there is.* (N. Taleb)

Exposures in real life are mostly too complicated to reduce to a well-defined "event".

Many exposures are highly nonlinear (e.g., beneficial rain, deadly floods).



## How to define rationality in complex systems?

### Bounded rationality (Herbert Simon)

Our knowledge of the world is fundamentally incomplete.  We cannot possibly measure and assess everything.

We therefore produce, under evolutionary pressures, some short-cuts  and distortions. It is near-impossible to produce a precise, unbiased  understanding of reality.

### Ecological rationality (Gerd Gigerenzer)

In this context, ecological rationality research focuses on mapping how  many things we do that appear, on the surface, illogical, have deeper  reasons.

### Revealed preferences (Ken Binmore)

Ken Binmore argues that there is nothing particularly irrational in beliefs per se (given that they can be shortcuts and instrumental to something  else). There is no such thing as the "rationality" of a belief, there is rationality of action. The action is revealing the true preferences.  How much you truly "believe" in something can be manifested only through what you are willing to risk for it.

### Humanistic proposition: Rationality ~ Survival of humanity

The rationality of an action can be judged only in terms of evolutionary considerations.

> What threatens the survival of the collective first, and the individual second, is patently irrational.  What is rational is what allows the collective - entities meant to live for a long time - to survive. (N. Taleb)
>
> There needs to be no absorbing barrier, no substantial irreversibilities.
>
> Primum vivere, deinde philosophari (First, live; then philosophize) (Thomas Hobbes)
>
> Rationality is risk management and avoidance of systemic ruin. (N. Taleb)

**Implication:** There are some risks we just cannot afford even if they are in the long tail.

*Need to understand the impact of extreme events, of unconventional distributions of events and risk.*

## Asymmetries in society

| No Skin in the Game                          | Skin in the Game                   | Soul in the Game                                             |
| :------------------------------------------- | :--------------------------------- | :----------------------------------------------------------- |
| *Keeps upside, transfers downside to others* | *Takes her own risk*               | *Takes the downside on behalf of others*                     |
| Bureaucrats                                  | Citizens                           | Saints, warriors                                             |
| Large corporations with access to the state  | Merchants                          | Prophets                                                     |
| Corporate executives                         | (True) entrepreneurs               | Innovators                                                   |
| Scientists who play the system               | Laboratory and field experimenters | Maverick scientists who take risks with conjecture at distance from common beliefs |
| Politicians                                  | Activists                          | Dissidents                                                   |

> Soul in the game: "If you do not take risks for your opinion, you are nothing" (Taleb) (from N. Taleb, *Skin in the Game*)

## Evolution of moral symmetry (Taleb and Sandis 2016)

|                                  | Rule                                                         | Source                  |
| :------------------------------- | :----------------------------------------------------------- | :---------------------- |
| Hammurabi/Lex Talionis           | An eye for an eye, a tooth for a tooth                       | Hammurabi, Exodus 21.24 |
| 15th Law of Holiness and Justice | Love your neighbour as yourself                              | Leviticus 19.18         |
| Silver Rule                      | Do not treat others the way you would not like them to treat you | Negative Golden Rule    |
| Golden Rule                      | Do unto others as you would have them do unto you            | Matthew 7:12            |
| Formula of the Universal Law     | Act only in accordance with that maxim through which you can at the same time will that it will become a universal law | Kant 1785: 4:421        |



## Information sharing in transactions

### Gharar rule (Sharia):

*No inequality of uncertainty*: No person in a transaction should have certainty about the outcome while the other one has uncertainty.

### Talmudic approach (Medieval rabbi Shlomo Yitzhaki)

Not only should there be transparency concerning what the seller has in  mind, but there should also be transparency concerning what the seller  thinks *deep down*.

### Membership in tribes/communities (E. Ostrom)

There exists a certain community size below which people act as  collectivists, protecting the commons, as if the entire unit became  rational. Groups behave differently at different scale.

### Insider-trading/Anti-trust laws

Insider trading of a public company's stock  based on material nonpublic information about the company is illegal.

Antitrust laws generally to promote competition for the benefit of consumers.

# The dominance of the stubborn minority

## Emergence

Characteristic of complex systems:

- The ensemble behaves in ways not predicted by its components. 
- The interactions matter more than the nature of the units.

## Example: Minority rule

An intransigent minority at a small level (e.g. 3% of the population) can  get the entire population to submit to their preference if the majority  is flexible.  The dominance of the minority creates the illusion for a naive observer  who looks only at the standard average that choices and preferences are  based on those of the majority.

## The Stubborn Minority

- GMOs do not stand a chance despite all the lobbying.

  > Transgenic-GMO eaters will eat non-GMOs, but not the reverse.

- Many German companies have English-only meetings.

  > Everybody knows - often bad - English, the reverse is less likely.

- The one-way street of religions.

  > Romans accepted many gods, Christians only one.  Under Islamic law, if a non-Muslim man marries a Muslim woman, he needs  to convert to Islam – and if either parent of a child happens to be  Muslim, the child will be Muslim. Becoming a Muslim is irreversible.

- One-drink-only parties.

  > Once you have 10 percent or more women at a party, you cannot serve only beer.  But most men will drink wine. So you only need one set of glasses if you serve only wine. (*Rory Sutherland, Advertising Executive*)

Source: N. Taleb

## Renormalization group

Successive application of minority rule in the face of attitudinal asymmetries. The four boxes exhibit fractal self-similarity. [insert minority tyranny]

In the renormalization group the "veto" effect of a minority can steer choices of the group.

## Discussion

- Should a society that has elected to be tolerant be intolerant about intolerance?
- Are markets the sum of all market participants or do price  changes rather reflect the activities of the most motivated buyer and  seller?

> *Never doubt that a small group of thoughtful citizens can change the world. Indeed, it is the only thing that ever has.  (Margaret Mead)*
>
> *By the minority rule, all it takes is a very small number of  detractors using misplaced buzzwords of the type that makes people  cringe (such as "racist") to scare an entire institution. (N. Taleb)*

## Counterintuitive observations about the collective

- The average behavior of the market participants will not allow us to understand the general behavior of the market
- The psychological experiments on individuals showing „biases“ do  not allow us to automatically understand aggregates or collective
- The higher the dimension, i.e. the number of possible  interactions, the more disproportionally difficult it is to understand  the macro from the micro, the general from the simple units
- Fundamental limitation of behavioral economics on how to play the market or generate policy
- Mathematically speaking, the mean-field approach, where one  generalizes from the average interaction to the group is only possible  if there are no asymmetries

# Galam models

The following class of Galam models is studying the  question how to  measure the effective democratic balance of hierarchical organizations  based on local bottom up voting using local majority rule. The net  result is the singling out of a series of anti-democratic effects.

## A one level hierarchy with three agents randomly selected from a population and application of majority rule.

The main scheme considers a population with a two species A and B mixture, whose respective proportions are respectively *p*0 and (1−*p*0).

It could be either a political group, a firm, or a whole society. At  this stage each member does have an opinion.  A bottom up hierarchy is then built by extracting randomly some agents  from the surrounding population. These agents are distributed randomly  in a series of groups with finite size *r*, which constitute the hierarchy bottom. It is the level (0) of the hierarchy. Then each one of these groups elects a representative according to some well defined voting rule *R**r*(*p*0), which is a majority rule function of the current composition of the group. This composition is probabilistic and depends on *p*0 since the group members are randomly selected from the surrounding population. Therefore the voting outcome of the group is either an A with a probability *p*1=*R**r*(*p*0) or a B with probability (1−*p*1)  as shown in Figure.

# Gambles and wealth

A *gamble* is defined as a set of payouts associated with a probability distribution.

When considering gambles we should calculate the [expected value](https://en.wikipedia.org/wiki/Expected_value), understood as taking the average after many (tending to infinity)  realizations, and only enter such a gamble if this number is positive.

Poker players and gamblers refer to this as making *positive EV plays*.

In practice, they seek to optimize their change in wealth Δ*x*=*x*(*t*+Δ*t*)−*x*(*t*)

## St. Petersburg Paradox

Consider games such as [this](https://en.wikipedia.org/wiki/St._Petersburg_paradox):

A casino offers a game of chance in which a fair coin is tossed at each stage.

> The initial stake starts at $2

 and is doubled every time heads appears. The first time tails appears,  the game ends and the player wins whatever is in the pot.

Thus the player wins $2

 if tails appears on the first toss, USD4 if heads appears on the first toss and tails on the second, USD8

>  if heads appears on the first two tosses and tails on the third, and so on.

What would be a fair price (i.e. a price at which you would feel  indifferent taking the role of the gambler or the casino) to play such a game?

The expected value of such a game is

𝔼=12⋅2+14⋅4+18⋅8+⋯=1+1+1+⋯=∞

Should we be willing to pay any amount for the opportunity to play? Most people would not, even though the game has an infinite expected value.

### Historical perspective

The aforementioned paradox was studied by [Daniel Bernoulli](https://en.wikipedia.org/wiki/Daniel_Bernoulli) in a paper published in 1738 in the journal of the Imperial Academy of Science in St. Petersburg.

In it, he introduced the [expected utility hypothesis](https://en.wikipedia.org/wiki/Expected_utility_hypothesis):

> Individual preferences concerning such gambles seek to maximise not the expected change in wealth, but the expected change in *utility*, which is a mathematical concept that captures the subjective value of wealth to the individual.

Utility functions could differ between individuals, which gives much  (perhaps too much) flexibility to the theory, at the cost of explanatory power.

### Optimizing wealth over time

Professor [Ole Peters](http://tuvalu.santafe.edu/~ole/), Fellow at the [London Mathematical Laboratory](http://www.lml.org.uk/), has studied random processes such as this under different dynamics  (where wealth changes in additive or multiplicative increments) and has  proposed an alternative approach, one that seeks to explain human  decision making when faced with such risky propositions. Instead of  taking into account the state space average of wealth, this paradigm  focuses on the time-average of wealth which are most often **not equal**. This framework is generally useful in evaluating gambles, and delivers  insights into questions of optimal leverage, the puzzle of insurance,  the emergence of cooperation, and the dynamics of inequality.

In a nutshell:

> People just optimize what happens to their wealth over time.



## Wealth dynamics and inequality

### Starting observations (Ole Peters)

- Inequality x Distorted perception of realtiy = Frustration, anxiety, depresssion
- Some inequality leads to inspiration, motivation
- Too much inequality leads to frustration

### Empirical data

US household income 1967-2008 (inflation-adjusted)

- Richest 5%: +87% (to $ 295.000)
- Poorest 20%: +29% (to $ 11.500)

## Motivating problem

Imagine we offer you the following game:

- We toss a coin, and if it comes up heads we increase your monetary wealth by 50%. 
- If it comes up tails we reduce your wealth by 40%. 
- We’re not only doing this once, we will do it many times, for example once per week for the rest of your life. 

Would you accept the rules of our game? Would you submit your wealth to the dynamic our game will impose on it?



## Modeling the initial wealth gamble

Rules of the game: Flip a coin

- heads -> increase your wealth by 50%
- tails  -> decrease your wealth by 40%

To model the dynamics of wealth under the above rules we first randomly generate a factor *r*(*t*) at regular intervals of duration *δ*.

*r*(*t*)={0.6 with probability 0.51.5 with probability 0.5

Wealth can then be calculated over time.

*x*(*t*)=*r*(*t*)*x*(*t*−*δ**t*)

### Example trajectory of wealth

We'll generate 52 draws from a uniform distribution [0,1], and call every  value > 0.5 heads, and tails for the rest.  Our initial wealth is $1.

```python
import numpy as np

steps=52
np.random.seed(339393202)

def generate_factors(steps=steps):
    """Generate wealth factors for the experiment.  Heads => 1.5   Tails => 0.6
    """
    draws = np.random.rand(steps)
    factors = np.where(draws > 0.5, 1.5, 0.6)
    factors[0] = 1 # Factor at initial time step
    return factors
    
def final_wealth(factors, initial_wealth):
    return np.multiply.reduce(factors, initial=initial_wealth)

initial_wealth = 1
factors = generate_factors(steps)

print(final_wealth(factors, initial_wealth))
```

You get a random output of say `0.01734973`

#### Plotting the evolution of our wealth with time

```python
%config InlineBackend.figure_format="retina"
%matplotlib inline

import matplotlib.pyplot as plt
plt.style.use("seaborn")
plt.rcParams["figure.figsize"] = (20, 12)

def wealth_over_time(factors, initial_wealth):
    """Returns np.array of wealth over time"""
    return factors.cumprod() * initial_wealth

factors = generate_factors(steps)
# plt.yscale('log')
plt.plot(wealth_over_time(factors, initial_wealth))
plt.title("Wealth over time")
plt.xlabel("t")
plt.ylabel("x(t)");
```

![wot](/assets/ergodicity/wot.png)

#### Repeating the gamble 10 times and plotting the wealth over time

```python


# Showingg multiple iterations of wealth increase 
# over time in the above gamble
%config InlineBackend.figure_format="retina"
%matplotlib inline

import matplotlib.pyplot as plt
plt.style.use("seaborn")
plt.rcParams["figure.figsize"] = (20, 12)
steps = 52

for r in range(10):
    factors = generate_factors(steps)
    plt.plot(wealth_over_time(factors, initial_wealth))
    
# plt.yscale('log')
plt.title("Wealth over time")
plt.xlabel("t")
plt.ylabel("x(t)");
```

![wot](/assets/ergodicity/wom.png)

### Ensemble average

By averaging over many trials - think many parallel universes - one get rid of the fluctuations.

```python
# Showing the average increase of wealth over time in the ensemble aggregate
%config InlineBackend.figure_format="retina"
%matplotlib inline

import matplotlib.pyplot as plt
plt.style.use("seaborn")
plt.rcParams["figure.figsize"] = (20, 12)
steps = 52
trialrange = [1, 100, 10000, 1000000]

def averagetrials(repeats):
    factors = [generate_factors(steps) for _ in range(repeats)]
    wealth = [wealth_over_time(factor, initial_wealth) for factor in factors]
    cum_wealth = []
    for i in range(steps):
        sum = 0
        for j in range(repeats):
            sum += wealth[j][i]
        cum_wealth.append(sum/repeats)
    return cum_wealth

for r in trialrange:
    line, = plt.plot(averagetrials(r))
    line.set_label("N = " + str(r))

plt.legend()
    
plt.yscale('log')
plt.title("Wealth over time - logarithmic scale")
plt.xlabel("t")
plt.ylabel("x(t)");
```

![wot](/assets/ergodicity/wol.png)

#### Expectation value and reality check

The expected value of the game is

**𝔼(*x*(*t*+Δ*t*))=0.5⋅1.5*x*(*t*)+0.5⋅0.6*x*(*t*)=1.05*x*(*t*)**

This makes it a positive **EV** game and the wealth is expected to increase indefinitely.

**Key questions:**

- **Does this average of the ensemble matter to my individual wealth? (reality ~ parallel universes)** 
- **What is the role of time? (reality ~ \*one\* sequence in time)**



### Time average

We can also repeat the gamble over long periods of time and take the time average to get rid of the fluctuations.

#### Steps = 1040

```python
plt.rcParams["figure.figsize"] = (20, 12)

steps = 1040
def wealth_over_time(factors, initial_wealth):
    """Returns np.array of wealth over time"""
    return factors.cumprod() * initial_wealth

factors = generate_factors(steps)
# plt.yscale('log')
plt.plot(wealth_over_time(factors, initial_wealth))
plt.title("Wealth over time")
plt.xlabel("t")
plt.ylabel("x(t)");
```

![wot](/assets/ergodicity/wos.png)

#### Steps = 10000 (log scale)

```python
plt.rcParams["figure.figsize"] = (20, 12)

steps = 10000
def wealth_over_time(factors, initial_wealth):
    """Returns np.array of wealth over time"""
    return factors.cumprod() * initial_wealth

factors = generate_factors(steps)
plt.yscale('log')
plt.plot(wealth_over_time(factors, initial_wealth))
plt.title("Wealth over time - logarithmic scale")
plt.xlabel("t")
plt.ylabel("x(t)");
```

![wot](/assets/ergodicity/wols.png)

Surpisingly, our wealth goes to 0 as we repeat the experiment, with

lim*T*→∞*x*(*t*+*T*Δ*t*)=0

There is high variance in the short term, but over the long run we see that realizations tend to 0 as *t* grows. What is happening here is that as *T*  increases: lim*T*→∞*x*(*t*+*T*Δ*t*)=0

We see that this game, which has a positive expected value, has a *time average value* of 0.

We say that such systems are **non ergodic**, that is,  they behave differently when averaged over time as averaged over the  space of all possible states. A system is non-ergodic when observed past probabilities do not apply to future processes. There is an absorbing  barrier somewhere to which the system will invariably tend. One may call these situations "ruin", as there is no reversibility away from the  condition.

**Interpretation**

- **Almost everybody will be broke over time.** --> Time average reflects what happens to me.
- **A few people will be extremely rich for the average of the ensemble to increase steadily.**  --> Ensemble average overemphasizes exceptional success.



## The existential differene between ensemble and time probability

> The difference between one hundred people going to a casino and one person  going to a casino one hundred times, i.e. between conventionally  understood probability and path-dependent probability. (from N. Taleb, *Skin in the Game*)

The presence of personal ruin disqualifies cost-benefit analyses.

Statistical testing is highly insufficient in the presence of both  ruin problems and repetition of failures. (e.g. cost-benefit analysis of smoking a single cigarette vs. the exposure from a life-time of  smoking)



## Fat tails and risk estimate distortions

A fat-tailed distribution is a probability distribution that exhibits a  large skewness or kurtosis, relative to that of either a normal  distribution or an exponential distribution.  In the normal distribution extreme events are less likely than for  fat-tailed distributions.

The Black–Scholes model of option pricing is based on a normal  distribution. If the distribution is actually a fat-tailed one, then the model will under-price options that are far out of the money, since a  5- or 7-sigma event is much more likely than the normal distribution  would predict.

Normal distributions that emerge in finance generally do so because  the factors influencing an asset's value or price are mathematically  "well-behaved", and the central limit theorem provides for such a  distribution. However, traumatic "real-world" events (such as an oil  shock, a large corporate bankruptcy, or an abrupt change in a political  situation) are usually not mathematically well-behaved.

Reference: [Wikipedia:Fat-tailed Distribution](https://en.wikipedia.org/wiki/Fat-tailed_distribution)



### The problem with many investment funds

Payoff in a skewed domain where the benefits are visible (and rewarded with  some compensation) and the detriment is rare (and unpunished owing to  absence of skin in the game). Think banking crisis.

## Denbunking economics

Professor Steve Keen sums it up clearly in his book *Debunking Economics*:

> "Ergodic" is a frequently misunderstood term, especially within economics.
>
> For the special class of ergodic systems, the time average is the  same for almost all initial points: statistically speaking, the system  that evolves for a long time *forgets* its initial state.

This is not the case for complex or chaotic models, which show "sensitive dependence on initial conditions" (see [Butterfly Effect](https://en.wikipedia.org/wiki/Butterfly_effect) and [Chaos Theory](https://en.wikipedia.org/wiki/Chaos_theory)).

### Ensembles vs. time in everyday life

- GDP/capita is heavily distorted by inequality in the group.
- GDP increases if a billionaire makes an extra billion and 20.000 teachers (annual salary 40K) become jobless.
- Static inequality is a snapshot view of inequality; it does not reflect what will happen to you in the course of your life.
- Dynamic (ergodic) inequality takes into account the entire future and past life.
- The way to make society more equal is by forcing (through skin in  the game) the rich to be subjected to the risk of exiting from the 1  percent
- *No-absorbing barrier condition* as prerequiste for societal dynamic equality. (N. Taleb)
- If winner take-all-effects dominate the wealth process, many  conventional methods of economists that rely on ensemble averages become misleading.

**Reference:** Ole Peters, TEDxGoodEnoughCollege, *Time and Chance*, https://www.youtube.com/watch?v=LGqOH3sYmQA



# Fragility as "expert"

Time is equivalent to disorder.

Resistance to the ravages of disorder of time, i.e. survival, is the ability to handle disorder.

That which is fragile has an asymmetric response to volatility, time  and other stressors, i.e. will experience more harm than benefit from  it.

Non-perishable items (ideas, scientific theories, books,  technologies, procedures, institutions, political systems) age in  reverse, i.e. their life expectancy lengthens with time.

## Examples:

- Advice from grandmothers and elders tends to work.
- Science is an enterprise that produces claims that can be  contradicted by eventual observation, not a series of verifiable ones.  (Popper's mechanism of falsification)
- An idea will fail if it is not useful, and can therefore be vulnerable to the falsification of time. 
- The test of time is non-negotiable.
- Warren Buffett: "The difference between successful people and really successful people is that really successful people *say no* to almost everything." 

**Advice:**

- Say no to tail risk. There are many ways to solve problems without  complicated technologies that entail fragility and unknown possibility  of tail blowup.
- Never compare a multiplicative, systemic, and fat-tailed risk to a non-multiplicative, idiosyncratic, and thin-tailed one

**Reference:** N. Taleb, *Skin in the Game*



## Individual ruin vs. collective ruin

Unless you are perfectly narcissistic and psychopathic your worst-case  scenario is never limited to the loss of only your life. (N. Taleb, p.  228-229)

Taking personal risks to save the collective are "courage" and "prudence" since you are lowering risks for the collective.



## The ultimate risk is not to take any risk!